# 基本指令
- コードの提案は、最新のテクノロジーとベストプラクティスに基づいて行ってください。
- 変数名や関数名は意味のある名前を使ってください。
- コメントは簡潔かつ具体的に書いてください。
- マジックナンバーは避け、定数として定義してください。
- コードの可読性を重視してください。
- コードの変更は、常にテストを伴うようにしてください。
    - 変更後は、必ずテストを実行して、コードが正しく動作することを確認してください。
    - 実装ではなく、ユーザーの操作や見た目の振る舞いをテストしてください。

# 使用するフレームワーク、言語について編集ガイドライン
- プログラミング言語にはTypeScriptを用いてください。
- フレームワークにはNext.js(App router)を使用してください。
- Reactを使用してコンポーネントを作成してください。
- データベースにはPostgreSQLを利用し、Prisma ORMを使用してください。
- NextJSのベストプラクティスに従ってください。
- スタイリングにはTailwind CSSとshadcn/uiを使用してください。
- pnpmを使用してパッケージ管理を行ってください。
- なるべくTypeよりInterfaceを使用してください。

# 細かいルール
- セミコロンをつけること
- ファイルを移動する際はgit mvを使ってください
- importは絶対パスを使ってください. 例) `@/app/components/Header`

# 処理プロセス
0. **最初に**: まずは/docs以下のファイルを確認してください。doingにファイルがある場合には、途中のタスクから再開してください。ない場合にはユーザーに対して、新しいtodoを作成するか？もしくは、既存のtodoを消化するか？を確認してください。新しいtodoを作成する場合には要件を確認してください。
1.  **理解**: ユーザーの要求と関連するコードベースのコンテキストを理解します。`search_file_content`や`glob`を広範囲に使用して、ファイル構造、既存のコードパターン、規約を把握します。`read_file`や`read_many_files`でコンテキストを理解し、仮説を検証します。
2.  **計画**: /docs/todo以下に仕様書を作成してください。仕様書は以下のテンプレートで書いてください。計画書をユーザーに確認してもらってください。確認をもらったらdoingに移動してください。
```md
# 目的
背景を含めてください

# ゴール

# データベース関連の変更
新しいテーブル作成やテーブル構造の更新があれば書いてください。データの構造は重要です。慎重にお願いします。

# 編集するファイル名


# 新たに導入するライブラリ

# タスク
- [] タスク1
- [] タスク2
- [] タスク3
...
- [] ユーザーにチェックをもらう(必須)

```
3.  **実装**: 利用可能なツール（例：`replace`, `write_file`, `run_shell_command`）を使用してを実行し、プロジェクトの確立された規約に厳密に従います。仕様書のタスクを一つづつ実行してください。終わったタスクはチェックボックスにチェックを入れていってください。
4.  **検証（動作確認）**: ユーザーに動作確認をしてもらってください(動作確認の際はサーバーの起動コマンドは提示しなくても良いです)。その際に、修正があれば現状の仕様書に修正の欄を追加して、タスクを書き出してください。
```md
# 修正タスク
- [] 修正タスク1
- [] 修正タスク2
- [] 修正タスク3
...
- [] ユーザーにチェックをもらう(必須)
``` 
5. **コード変更の報告**: ユーザーに動作の確認をしてもらったら、次はコードの変更の報告をしてください。
今回のタスクで行ったコードの変更の概要を分かりやすくまとめてください。特に重要な点をまとめてください。もし、コードの変更で修正の要望があった場合は、修正タスクを仕様書に追加してください。
```報告のフォーマット
# 修正したファイル
# 特に報告したい内容
# 処理の流れ
```

```md
# 修正タスク
- [] 修正タスク1
- [] 修正タスク2
- [] 修正タスク3
...
- [] ユーザーにチェックをもらう(必須)
```

6. **最後に**: doingの仕様書をdoneのフォルダに移動してください。また、コミットメッセージを作成してください。そして、`0. **最初に**`に戻ってください。


# gitのルール

## ブランチ名
- ブランチ名の相談を受けた際には、下記のルールに従って提案してください。
- 基本は下記2つで運用して、難しい場合は適宜考える。（Issue 番号をいれて関連づける）
feature（新機能開発）
例: feature/#8_add_menu

hotfix（バグ修正）
例: hotfix/#21_fix_bug


## コミットメッセージ
- commitに適切なタイミングだと判断した際にメッセージを作成してください。
- Prefix（接頭辞）をつける
- コミットメッセージには Prefix をつける。
- Prefix は add、fix、change、clean、chore、remove、update、upgrade、revert・・・・など沢山あるが覚えるのも大変なので以下で運用。（Emoji はつけない）

add（新規機能・ファイル追加）
fix（バグやタイポの修正）
refactor（リファクタリング）
update（バグではない機能の改善、バージョンアップ等）
rename（ファイル名の変更）
remove（ファイルの削除）
move（ファイルの移動）

## commitするファイルの選定
コミットに含めるファイルはコミットメッセージに沿ってるものを選んでください。`git add -A`はしないでください。