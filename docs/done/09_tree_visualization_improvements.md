# ç›®çš„
ãƒ„ãƒªãƒ¼è¡¨ç¤ºã®è¦–èªæ€§ã‚’å‘ä¸Šã•ã›ã€è¤‡æ•°ã®æ·±å €ã‚ŠãŒã‚ã‚‹å ´åˆã§ã‚‚åŒºåˆ¥ã—ã‚„ã™ãã™ã‚‹ã€‚

## èƒŒæ™¯
- ç¾åœ¨ã®ãƒ„ãƒªãƒ¼è¡¨ç¤ºã¯ã€è¤‡æ•°ã®æ·±å €ã‚ŠãŒã‚ã‚‹å ´åˆã«ã©ã¡ã‚‰ã®ãƒ„ãƒªãƒ¼ãªã®ã‹è¦–èªã—ã¥ã‚‰ã„
- ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã¨ç·šã ã‘ã§ã¯ã€æ·±å €ã‚Šã®æµã‚ŒãŒåˆ†ã‹ã‚Šã«ãã„
- è¦ªãƒãƒ¼ãƒˆã¨å­ãƒãƒ¼ãƒˆã®é–¢ä¿‚æ€§ãŒä¸€ç›®ã§åˆ†ã‹ã‚Šã«ãã„

# ã‚´ãƒ¼ãƒ«
1. è¤‡æ•°ã®æ·±å €ã‚Šãƒ„ãƒªãƒ¼ã‚’è¦–è¦šçš„ã«åŒºåˆ¥ã—ã‚„ã™ãã™ã‚‹
2. è¦ªå­é–¢ä¿‚ã‚’æ˜ç¢ºã«è¡¨ç¾ã™ã‚‹
3. æ·±å €ã‚Šã®æ·±ã•ã‚’è¦–è¦šçš„ã«ç†è§£ã—ã‚„ã™ãã™ã‚‹
4. å…¨ä½“çš„ãªè¦‹ãŸç›®ã‚’æ´—ç·´ã•ã›ã‚‹

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é–¢é€£ã®å¤‰æ›´
- ãªã—ï¼ˆæ—¢å­˜ã®ã‚¹ã‚­ãƒ¼ãƒã§å¯¾å¿œå¯èƒ½ï¼‰

# ç·¨é›†ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«å
- `src/app/components/NoteCard.tsx` - ãƒ„ãƒªãƒ¼è¡¨ç¤ºã®ãƒ‡ã‚¶ã‚¤ãƒ³æ”¹å–„
- `src/app/components/ChildNoteCard.tsx` - å­ãƒãƒ¼ãƒˆã®ãƒ‡ã‚¶ã‚¤ãƒ³æ”¹å–„ï¼ˆã¾ãŸã¯çµ±åˆï¼‰
- `src/app/globals.css` - å¿…è¦ã«å¿œã˜ã¦ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¿ã‚¤ãƒ«è¿½åŠ 

# æ–°ãŸã«å°å…¥ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- ãªã—

# ã‚¿ã‚¹ã‚¯

## Task 1: ãƒ„ãƒªãƒ¼ã®è¦–è¦šçš„åŒºåˆ¥
- [x] å„æ·±å €ã‚Šãƒ„ãƒªãƒ¼ã«è‰²åˆ†ã‘ã‚’å°å…¥
  - [x] ãƒ„ãƒªãƒ¼ã”ã¨ã«ç•°ãªã‚‹ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼ã‚’è‡ªå‹•å‰²ã‚Šå½“ã¦
  - [x] ãƒ‘ã‚¹ãƒ†ãƒ«ã‚«ãƒ©ãƒ¼ã§ç›®ã«å„ªã—ã
  - [x] è‰²ã¯ãƒ„ãƒªãƒ¼ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‹ã‚‰æ±ºå®šçš„ã«ç”Ÿæˆ
- [x] ãƒ„ãƒªãƒ¼å…¨ä½“ã‚’å›²ã‚€ã‚³ãƒ³ãƒ†ãƒŠã‚’è¿½åŠ 
  - [x] å·¦å´ã«è‰²ä»˜ãã®ãƒœãƒ¼ãƒ€ãƒ¼
  - [x] èƒŒæ™¯è‰²ã‚’è–„ãä»˜ã‘ã‚‹
  - [x] ãƒ›ãƒãƒ¼æ™‚ã«ãƒã‚¤ãƒ©ã‚¤ãƒˆï¼ˆè¦ªãƒãƒ¼ãƒˆã‚«ãƒ¼ãƒ‰ï¼‰

## Task 2: è¦ªå­é–¢ä¿‚ã®æ˜ç¢ºåŒ–
- [x] ã‚³ãƒã‚¯ã‚¿ãƒ¼ãƒ©ã‚¤ãƒ³ï¼ˆconnecting lineï¼‰ã®æ”¹å–„
  - [x] è¦ªãƒãƒ¼ãƒ‰ã‹ã‚‰å­ãƒãƒ¼ãƒ‰ã¸ã®è¦–è¦šçš„ãªç·šã‚’å¼·åŒ–
  - [x] å®Ÿç·šã§è¡¨ç¤º
  - [x] è‰²ã‚’å„ãƒ„ãƒªãƒ¼ã®ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼ã«åˆã‚ã›ã‚‹
- [x] éšå±¤æ§‹é€ ã®è¦–è¦šåŒ–
  - [x] ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã‚’ç¶­æŒ
  - [x] depthè¡¨ç¤ºã‚’è¿½åŠ ï¼ˆQ1, Q2...ã®ãƒãƒƒã‚¸ï¼‰

## Task 3: æ·±å €ã‚Šã®æ·±ã•ã®è¦–è¦šåŒ–
- [x] æ·±ã•ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã‚’è¿½åŠ 
  - [x] å„è³ªå•ã«ã€ŒQ1ã€ã€ŒQ2ã€...ã€ŒQ5ã€ã®ãƒãƒƒã‚¸ã‚’è¡¨ç¤º
  - [x] é€²æ—ãƒãƒ¼å½¢å¼ã§æ·±ã•ã‚’è¡¨ç¤º
  - [x] é€²æ—ãƒãƒ¼ã®è‰²ã¯å„ãƒ„ãƒªãƒ¼ã®ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼ã«çµ±ä¸€
- [x] è³ªå•ã‚¿ã‚¤ãƒ—ã®è¦–è¦šçš„åŒºåˆ¥
  - [x] è³ªå•ã‚«ãƒ¼ãƒ‰ã¯ç™½èƒŒæ™¯ï¼‹å·¦å´ã®å¤ªã„è‰²ä»˜ããƒœãƒ¼ãƒ€ãƒ¼
  - [x] æœ€å¾Œã®è³ªå•ï¼ˆQ5ï¼‰ã¯ğŸ¯ã‚¢ã‚¤ã‚³ãƒ³ã§åŒºåˆ¥
  - [x] é€šå¸¸ã®è³ªå•ã¯ğŸ’ªã‚¢ã‚¤ã‚³ãƒ³

## Task 4: å…¨ä½“çš„ãªãƒ‡ã‚¶ã‚¤ãƒ³æ”¹å–„
- [x] ã‚«ãƒ¼ãƒ‰å½¢å¼ã®æ´—ç·´
  - [x] ã‚·ãƒ£ãƒ‰ã‚¦ã®èª¿æ•´
  - [x] è§’ä¸¸ã®èª¿æ•´
  - [x] ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã¨ãƒãƒ¼ã‚¸ãƒ³ã®æœ€é©åŒ–
- [x] ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ 
  - [x] ãƒ›ãƒãƒ¼æ™‚ã®è»½å¾®ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆè¦ªãƒãƒ¼ãƒˆã‚«ãƒ¼ãƒ‰ï¼‰
  - [x] é€²æ—ãƒãƒ¼ã®ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³åŠ¹æœ

## Task 5: å‹•ä½œç¢ºèª
- [x] è¤‡æ•°ã®æ·±å €ã‚Šãƒ„ãƒªãƒ¼ãŒã‚ã‚‹å ´åˆã®è¦–èªæ€§ã‚’ç¢ºèª
- [x] è‰²åˆ†ã‘ãŒé©åˆ‡ã«æ©Ÿèƒ½ã—ã¦ã„ã‚‹ã‹ç¢ºèª
- [x] è³ªå•ã‚«ãƒ¼ãƒ‰ã®è¦–èªæ€§ã‚’ç¢ºèª

## Task 6: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒã‚§ãƒƒã‚¯ã‚’ã‚‚ã‚‰ã†(å¿…é ˆ)
- [x] è¦‹ã‚„ã™ã•ãŒæ”¹å–„ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- [x] è¤‡æ•°ãƒ„ãƒªãƒ¼ã®åŒºåˆ¥ãŒã—ã‚„ã™ã„ã‹ç¢ºèª

# å®Ÿè£…è©³ç´°

## 1. ãƒ„ãƒªãƒ¼ã®è‰²åˆ†ã‘

### è‰²ç”Ÿæˆé–¢æ•°
```tsx
// utils/colors.ts
const TREE_COLORS = [
  { border: 'border-blue-300', bg: 'bg-blue-50', accent: 'bg-blue-500' },
  { border: 'border-green-300', bg: 'bg-green-50', accent: 'bg-green-500' },
  { border: 'border-purple-300', bg: 'bg-purple-50', accent: 'bg-purple-500' },
  { border: 'border-pink-300', bg: 'bg-pink-50', accent: 'bg-pink-500' },
  { border: 'border-orange-300', bg: 'bg-orange-50', accent: 'bg-orange-500' },
  { border: 'border-teal-300', bg: 'bg-teal-50', accent: 'bg-teal-500' },
];

export function getTreeColor(index: number) {
  return TREE_COLORS[index % TREE_COLORS.length];
}
```

### NoteCard.tsx ã§ã®é©ç”¨
```tsx
interface NoteCardProps {
  note: NoteWithChildren;
  index: number; // ãƒªã‚¹ãƒˆå†…ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
}

export function NoteCard({ note, index }: NoteCardProps) {
  const [isExpanded, setIsExpanded] = useState(true);
  const hasChildren = note.children && note.children.length > 0;
  const treeColor = getTreeColor(index);

  return (
    <div className="relative mb-12">
      {/* è¦ªãƒãƒ¼ãƒˆ */}
      <div
        className={`
          bg-white rounded-lg shadow-md p-6 border-l-4 ${treeColor.border}
          hover:shadow-lg transition-shadow duration-200
        `}
      >
        {/* ãƒãƒ¼ãƒˆå†…å®¹ */}
        <div className="prose prose-sm max-w-none">
          <EditorContent editor={editor} />
        </div>

        {/* ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€å‰Šé™¤ãƒœã‚¿ãƒ³ãªã© */}
      </div>

      {/* å­ãƒãƒ¼ãƒˆãƒ„ãƒªãƒ¼ */}
      {hasChildren && isExpanded && (
        <div className={`mt-4 ml-8 pl-6 border-l-2 ${treeColor.border} ${treeColor.bg} rounded-lg p-4`}>
          {note.children.map((child, childIndex) => (
            <ChildNoteCard
              key={child.id}
              note={child}
              depth={child.depth}
              treeColor={treeColor}
            />
          ))}
        </div>
      )}

      {/* æŠ˜ã‚ŠãŸãŸã¿ãƒœã‚¿ãƒ³ */}
      {hasChildren && (
        <button
          onClick={() => setIsExpanded(!isExpanded)}
          className={`
            absolute bottom-0 left-4 translate-y-full mt-2
            px-4 py-2 ${treeColor.accent} text-white rounded-b-lg text-sm
            hover:opacity-90 transition-opacity
            flex items-center gap-2
          `}
        >
          <span>{isExpanded ? 'â–¼' : 'â–¶'}</span>
          <span>æ·±å €ã‚Š{note.children.length}</span>
        </button>
      )}
    </div>
  );
}
```

## 2. å­ãƒãƒ¼ãƒˆã®æ”¹å–„

### ChildNoteCard.tsx
```tsx
interface ChildNoteCardProps {
  note: NoteWithChildren;
  depth: number;
  treeColor: TreeColor;
}

export function ChildNoteCard({ note, depth, treeColor }: ChildNoteCardProps) {
  const isLastQuestion = depth === 5;
  const depthColor = isLastQuestion ? 'bg-green-100 border-green-400' : 'bg-yellow-100 border-yellow-400';

  return (
    <div className="mb-6 space-y-2">
      {/* è³ªå• */}
      <div className={`p-4 rounded-lg border-l-4 ${depthColor} relative`}>
        {/* æ·±ã•ãƒãƒƒã‚¸ */}
        <div className={`
          absolute -left-3 -top-3 w-8 h-8 rounded-full ${treeColor.accent}
          flex items-center justify-center text-white text-xs font-bold
          shadow-md
        `}>
          Q{depth}
        </div>

        {/* è³ªå•ã‚¢ã‚¤ã‚³ãƒ³ */}
        <div className="flex items-start gap-2">
          <span className="text-xl">{isLastQuestion ? 'ğŸ¯' : 'ğŸ’ª'}</span>
          <div className="flex-1">
            <div className="text-xs font-semibold text-gray-600 mb-1">
              {isLastQuestion ? 'ãƒ‰ã‚¥ã‚¤ãƒƒãƒˆãã‚“ã®æœ€å¾Œã®è³ªå•' : 'ãƒ‰ã‚¥ã‚¤ãƒƒãƒˆãã‚“ã®è³ªå•'}
            </div>
            <div className="text-sm font-medium text-gray-800">
              {note.question}
            </div>
          </div>
        </div>
      </div>

      {/* å›ç­” */}
      <div className="ml-6 p-4 bg-white rounded-lg border border-gray-200 shadow-sm">
        <div className="flex items-center gap-2 mb-2">
          <span className="text-xs font-semibold text-gray-500">ã‚ãªãŸã®å›ç­”:</span>
        </div>
        <div className="prose prose-sm max-w-none">
          {/* TipTap content */}
        </div>
        <div className="text-xs text-gray-400 mt-2">
          {new Date(note.createdAt).toLocaleString('ja-JP')}
        </div>
      </div>

      {/* é€²æ—ãƒãƒ¼ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ */}
      <div className="ml-6 flex items-center gap-2">
        <div className="flex-1 h-1 bg-gray-200 rounded-full overflow-hidden">
          <div
            className={`h-full ${treeColor.accent} transition-all duration-300`}
            style={{ width: `${(depth / 5) * 100}%` }}
          />
        </div>
        <span className="text-xs text-gray-500">{depth}/5</span>
      </div>

      {/* å†å¸°çš„ã«å­ãƒãƒ¼ãƒ‰ã‚’è¡¨ç¤º */}
      {note.children && note.children.length > 0 && (
        <div className="ml-6 mt-4">
          {note.children.map((child) => (
            <ChildNoteCard
              key={child.id}
              note={child}
              depth={child.depth}
              treeColor={treeColor}
            />
          ))}
        </div>
      )}
    </div>
  );
}
```

## 3. ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

### globals.css or Tailwind config
```css
/* æŠ˜ã‚ŠãŸãŸã¿ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideUp {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    transform: translateY(-10px);
  }
}

.tree-expand {
  animation: slideDown 0.3s ease-out;
}

.tree-collapse {
  animation: slideUp 0.3s ease-out;
}

/* ãƒ›ãƒãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
.note-card {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.note-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
}
```

## 4. ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³

### ã‚¹ãƒãƒ›å¯¾å¿œ
```tsx
// NoteCard.tsx
<div className="relative mb-12">
  <div className={`
    bg-white rounded-lg shadow-md p-4 md:p-6
    border-l-4 ${treeColor.border}
  `}>
    {/* ... */}
  </div>

  {hasChildren && isExpanded && (
    <div className={`
      mt-4 ml-4 md:ml-8 pl-4 md:pl-6
      border-l-2 ${treeColor.border}
    `}>
      {/* ... */}
    </div>
  )}
</div>
```

# æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ
- è¤‡æ•°ã®æ·±å €ã‚Šãƒ„ãƒªãƒ¼ãŒä¸€ç›®ã§åŒºåˆ¥ã§ãã‚‹
- æ€è€ƒã®æµã‚ŒãŒè¦–è¦šçš„ã«ç†è§£ã—ã‚„ã™ããªã‚‹
- ã‚¢ãƒ—ãƒªå…¨ä½“ã®æ´—ç·´åº¦ãŒå‘ä¸Šã™ã‚‹
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè‡ªåˆ†ã®æ€è€ƒæ•´ç†ã‚’ã‚ˆã‚Šæ¥½ã—ã‚ã‚‹

# æ³¨æ„äº‹é …
- è‰²ã®ä½¿ã„ã™ãã«æ³¨æ„ï¼ˆã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ï¼‰
- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¯æ§ãˆã‚ã«ï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ï¼‰
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ã§å´©ã‚Œãªã„ã‚ˆã†ã«ååˆ†ãƒ†ã‚¹ãƒˆ
- ã‚«ãƒ©ãƒ¼ãƒ–ãƒ©ã‚¤ãƒ³ãƒ‰ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚‚é…æ…®ï¼ˆè‰²ã ã‘ã«ä¾å­˜ã—ãªã„ï¼‰
