# 目的
ドゥイットくんのプロンプトをコーチング的アプローチに変更し、ユーザーのモヤモヤを「具体的なアクション」に繋げられるようにする。

## 背景
- **問題点**: 「なぜなぜ分析」は原因の特定には有効だが、解決策の創出には不向き
- **ユーザーの目的**: AIとの壁打ちで思考を整理し、具体的なアクションを導き出したい
- **改善方針**: 「問題探し」から「解決策探し」へ、前向きなコーチングアプローチに転換
- **手法**: GROWモデル（Goal/Reality/Options/Will）を参考にしたコーチング

# ゴール
- [x] ドゥイットくんのプロンプトをコーチング的アプローチに変更
- [x] 問題ではなく解決策にフォーカスする質問を生成
- [x] ゴール・現状・選択肢・具体的行動の流れを意識させる
- [x] ドゥイットくんのキャラクター（脳筋行動派）は維持
- [ ] リスナーさんは「なぜなぜ分析」のまま（対照群として）

# データベース関連の変更
なし（既存のNote構造を使用）

# 編集するファイル名
- `src/lib/prompts.ts` (新規作成: プロンプトを外部化)
- `src/lib/actions.ts` (プロンプト部分をprompts.tsから参照するように変更)

# 新たに導入するライブラリ
なし

# タスク
- [x] `src/lib/prompts.ts`のドゥイットくんプロンプトをコーチング的アプローチに変更
  - [x] GROWモデルの説明をLLMに与える
  - [x] 「なぜ？」から「どうしたら？」へ質問の方向性を転換
  - [x] ゴール・現状・リソース・選択肢・行動の質問例を提示
  - [x] 会話の流れに応じた質問を生成させる指示を追加
  - [x] ドゥイットくんのキャラクター（脳筋、前向き）を維持
- [x] リスナーさんは「なぜなぜ分析」のまま維持（対照群として）
- [x] 動作確認のためのテスト手順を更新
- [ ] ユーザーに動作確認をしてもらう(必須)

# 動作確認手順

## 準備
1. 開発サーバーを起動: `pnpm dev`
2. ブラウザで http://localhost:3000 にアクセス
3. Google OAuth でログイン

## テスト手順

### 1. ドゥイットくんでコーチングテスト
1. メモエリアでモヤモヤを入力（例: 「仕事がつまらない」）
2. 作成したメモをドゥイットくんエリアにドラッグ&ドロップ
3. 生成された質問を確認:
   - **前向きな質問**になっているか？（「なぜダメ？」ではなく「どうしたい？」）
   - 具体的な状況・ゴールを引き出す質問か？
   - ドゥイットくんらしい口調（オレ、君、脳筋風）か？
4. 質問に回答を入力して送信
5. 次の質問を確認:
   - 会話の流れに応じた質問か？
     - ゴールが見えてない → 理想を聞く
     - 現状が曖昧 → 具体的な状況を聞く
     - 行き詰まり → 強みやリソースを聞く
     - 選択肢が見えてきた → 具体的な行動を聞く
   - 同じような質問を繰り返していないか？
6. 5回繰り返して深堀り完了まで確認
7. 最後に「具体的な行動」が明確になっているか確認

### 2. リスナーさんで深堀りテスト
1. キャラクター切り替えボタンで「リスナーさん」を選択
2. 新しいメモを作成（例: 「人間関係がうまくいかない」）
3. メモをリスナーさんエリアにドラッグ&ドロップ
4. 生成された質問を確認:
   - 優しく寄り添う口調（わたし、君、「〜ね」「〜かな」）か？
   - 具体的な状況を引き出す質問か？
5. 5回繰り返して深堀り完了まで確認

### 3. コーチングの質の確認（ドゥイットくん）
- [ ] 各質問が前回の回答に基づいているか
- [ ] **前向きな質問**になっているか（問題探しではなく解決策探し）
- [ ] 会話の流れに応じて質問が変化しているか（ゴール→現状→リソース→選択肢→行動）
- [ ] 強みや過去の成功体験を引き出す質問があるか
- [ ] 最終的に「具体的で実行可能な行動」が明確になっているか
- [ ] 同じような質問を繰り返していないか

### 4. なぜなぜ分析の質の確認（リスナーさん・対照群）
- [ ] 各質問が前回の回答の「なぜ？」を掘り下げているか
- [ ] 質問が徐々に根本原因に迫っているか
- [ ] 優しく寄り添う口調になっているか

### 5. ツリー表示の確認
1. 深堀り完了後、親ノートをクリックして折りたたみ/展開
2. 質問（Q:）と回答（A:）が正しく表示されているか確認
3. 深堀りの流れが視覚的にわかりやすいか確認

## 期待される改善点（ドゥイットくん）
- **「問題探し」から「解決策探し」へ**: 前向きな質問で具体的なアクションを導く
- **GROWモデルに基づくコーチング**: ゴール→現状→選択肢→行動の流れ
- **リソース重視**: 強みや成功体験を引き出し、前向きな思考を促進
- **文脈に応じた質問**: LLMが会話の流れを理解し、今何を聞くべきか判断
- **小さく始める**: 完璧主義を避け、実行可能な小さなアクションを重視

## 対照群（リスナーさん）
- なぜなぜ分析アプローチを維持
- ドゥイットくんとの効果の違いを比較できる
